# Лабораторная работа: Просмотр таблицы MAC-адресов коммутатора

## Топология

![image](https://github.com/user-attachments/assets/5219e6be-b0bc-4ff9-b2ec-cc35c1984af5)


### Таблица адресации

| Устройство | Интерфейс | IP-адрес    | Маска подсети   |
|------------|-----------|-------------|-----------------|
| S1         | VLAN 1    | 192.168.1.11| 255.255.255.0   |
| S2         | VLAN 1    | 192.168.1.12| 255.255.255.0   |
| PC-A       | NIC       | 192.168.1.1 | 255.255.255.0   |
| PC-B       | NIC       | 192.168.1.2 | 255.255.255.0   |

## Цели
1. **Часть 1**: Создание и настройка сети.
2. **Часть 2**: Изучение таблицы MAC-адресов коммутатора.

## Общие сведения/сценарий

Коммутатор уровня 2 в локальной сети предназначен для доставки кадров Ethernet. Он создает таблицу MAC-адресов для сопоставления узловых устройств с портами коммутатора. Понимание работы коммутаторов необходимо для обеспечения безопасности и стабильности сети.

## Необходимые ресурсы
- 2 коммутатора (например, Cisco 2960 с Cisco IOS 15.2(2))
- 2 ПК (с Windows и терминальной программой, такой как Tera Term)
- Консольные кабели для настройки
- Ethernet-кабели

## Инструкции

### Часть 1. Создание и настройка сети

**Шаг 1. Подключите сеть согласно топологии**. 

![image](https://github.com/user-attachments/assets/0c199e0d-1d20-47db-84c9-a18ae853d961)

**Шаг 2. Настройте узлы ПК**.

![image](https://github.com/user-attachments/assets/6f8ee3dc-9cec-49ed-a36d-604721a35ebc)
![image](https://github.com/user-attachments/assets/c7dd4d3c-388e-41ac-85ba-52627ebc965c)
![image](https://github.com/user-attachments/assets/8ed817b8-a719-4146-94f1-053af0bf6f71)

**Шаг 3. Инициализируйте и перезагрузите коммутаторы**:
   - S1:
     
     ![image](https://github.com/user-attachments/assets/993bbe8a-7df5-4b92-acd8-d99c48a6e680)
     ![image](https://github.com/user-attachments/assets/62add319-e498-4532-8821-e50c8610b38c)
   - S2:
     
     ![image](https://github.com/user-attachments/assets/21227088-b5ae-44bd-a12b-34329e54b20d)
     ![image](https://github.com/user-attachments/assets/241e88a8-3b7a-478e-8ed1-2cccf5cba348)

**Шаг 4. Настройте базовые параметры каждого коммутатора**:
   - Присвойте имена устройствам согласно топологии:
     - S1:
       
       ![image](https://github.com/user-attachments/assets/85865da0-181f-4847-9e19-d989a8c0826d)


     - S2:
       
       ![image](https://github.com/user-attachments/assets/38f31b12-cf02-4e0e-93f8-b8afa6fec0e4)


   - Настройте IP-адреса как указано в таблице адресации.
     
     -S1:

     ![image](https://github.com/user-attachments/assets/ede79058-d571-4bdb-b42c-7fca16ea56a0)
     ![image](https://github.com/user-attachments/assets/ae1b8168-fd22-4eca-b50f-bbeac2ce7a31)

     -S2:
     
     ![image](https://github.com/user-attachments/assets/1b6f8a17-cf7f-420f-8e33-81c876e2f67c)
     ![image](https://github.com/user-attachments/assets/6693faa3-cf1c-42eb-8f9a-aa6fdad611cd)

   - Назначьте `cisco` в качестве паролей консоли и VTY:
     - S1:
       
       ![image](https://github.com/user-attachments/assets/8b6e74a9-4628-4944-ba56-54913d8f4860)

     - S2:
       
       ![image](https://github.com/user-attachments/assets/d2a48205-5b50-46cc-9d12-a8f57dd2b683)

   - Назначьте `class` как пароль доступа к привилегированному режиму EXEC:
     - S1:
       
       ![image](https://github.com/user-attachments/assets/a7f069d0-d3a4-44a9-94d6-c00b7fd9333f)

     - S2:
       
       ![image](https://github.com/user-attachments/assets/cf6c6ee2-c829-4777-8d6b-8e2a804223ba)


### Часть 2. Изучение таблицы MAC-адресов коммутатора

**Шаг 1. Запишите МАС-адреса сетевых устройств**:
-	Откройте командную строку на PC-A и PC-B и введите команду ipconfig /all.
Назовите физические адреса адаптера Ethernet.

**MAC-адрес компьютера PC-A:**  `0030.F2D6.1EB6`

![image](https://github.com/user-attachments/assets/8bff575a-af5e-42b8-9132-efea4e5a6648)

**MAC-адрес компьютера PC-A:**  `0090.21C2.8B38`

![image](https://github.com/user-attachments/assets/2d9d1370-fce8-4a7a-a717-d57cc3911924)

-Подключитесь к коммутаторам S1 и S2 через консоль и введите команду show interface F0/1 на каждом коммутаторе
-Назовите адреса оборудования во второй строке выходных данных команды (или зашитый адрес — bia).

**МАС-адрес коммутатора S1 Fast Ethernet 0/1:** address is `0060.2f0a.6b01 (bia 0060.2f0a.6b01)`

![image](https://github.com/user-attachments/assets/496bd163-89f7-452c-8045-5991fdcd600e)

**МАС-адрес коммутатора S2 Fast Ethernet 0/1:** address is `0001.c955.4501 (bia 0001.c955.4501)`

![image](https://github.com/user-attachments/assets/cca19363-8dbf-410f-9718-8b0c3035efc1)

**Шаг 2. Просмотрите таблицу МАС-адресов коммутатора**

Подключитесь к коммутатору S2 через консоль и просмотрите таблицу МАС-адресов до и после тестирования сетевой связи с помощью эхо-запросов.

a.	Подключитесь к коммутатору S2 через консоль и войдите в привилегированный режим EXEC.
Откройте окно конфигурации

b.	В привилегированном режиме EXEC введите команду show mac address-table и нажмите клавишу ввода.

**S2#** `show mac address-table`

Даже если сетевая коммуникация в сети не происходила (т. е. если команда ping не отправлялась), коммутатор может узнать МАС-адреса при подключении к ПК и другим коммутаторам.

**Вопросы:**
Записаны ли в таблице МАС-адресов какие-либо МАС-адреса? 

**Ответ:** дa

![image](https://github.com/user-attachments/assets/f7df4ae5-6220-40a1-aafe-8f653d11e074)

- Какие МАС-адреса записаны в таблице? С какими портами коммутатора они сопоставлены и каким устройствам принадлежат? Игнорируйте МАС-адреса, сопоставленные с центральным процессором.
- Если вы не записали МАС-адреса сетевых устройств в шаге 1, как можно определить, каким устройствам принадлежат МАС-адреса, используя только выходные данные команды show mac address-table? Работает ли это решение в любой ситуации?

**Ответ:**
Можно сопоставить MAC-адрес с портом. Тут мы можем увидеть, на каком порту коммутатора находится устройство с данным MAC-адресом.
После чего определить устройство по порту. Зная, какие устройства подключены к каким портам коммутатора, мы можем определить, какое устройство имеет конкретный MAC-адрес, сопоставив порт и устройство.

**Шаг 3. Очистите таблицу МАС-адресов коммутатора S2 и снова отобразите таблицу МАС-адресов.**

a.	В привилегированном режиме EXEC введите команду clear mac address-table dynamic и нажмите клавишу Enter.

**S2#** `clear mac address-table dynamic`

b.	Снова быстро введите команду show mac address-table.

Указаны ли в таблице МАС-адресов адреса для VLAN 1? Указаны ли другие МАС-адреса?

![image](https://github.com/user-attachments/assets/28abbadf-fda2-4535-a115-76b159420948)

Через 10 секунд введите команду **show mac address-table** и нажмите клавишу ввода. 

Появились ли в таблице МАС-адресов новые адреса?

![image](https://github.com/user-attachments/assets/d76d6aaa-2f74-4ee6-83e8-2303bcdaea15)


**Шаг 4. С компьютера PC-B отправьте эхо-запросы устройствам в сети и просмотрите таблицу МАС-адресов коммутатора.**

a.	На компьютере PC-B откройте командную строку и еще раз введите команду **arp -a**.

Откройте командную строку.

**Вопрос:**
Не считая адресов многоадресной и широковещательной рассылки, сколько пар IP- и МАС-адресов устройств было получено через протокол ARP?

![image](https://github.com/user-attachments/assets/48f598b4-519a-4fd5-8821-fcb3c636c368)

b.	Из командной строки PC-B отправьте эхо-запросы на компьютер PC-A, а также коммутаторы S1 и S2.

**Вопрос:**
От всех ли устройств получены ответы? Если нет, проверьте кабели и IP-конфигурации.

**PC-A:**

![image](https://github.com/user-attachments/assets/be1529bd-1519-47d0-b7c0-e578ff6bf642)

**S1:**

![image](https://github.com/user-attachments/assets/42e16ab2-7132-48f3-aff4-b2080f3ee5df)

**S2:**

![image](https://github.com/user-attachments/assets/85aed44d-4a00-4575-99c5-611b31b584aa)

c.	Подключившись через консоль к коммутатору S2, введите команду **show mac address-table**.

Откройте окно конфигурации

**Вопрос:**

Добавил ли коммутатор в таблицу МАС-адресов дополнительные МАС-адреса? Если да, то какие адреса и устройства?

![image](https://github.com/user-attachments/assets/8905db0e-d14c-41e3-a945-4fc62a7a03c9)

На компьютере PC-B откройте командную строку и еще раз введите команду **arp -a**.

**Вопрос:**

Появились ли в ARP-кэше компьютера PC-B дополнительные записи для всех сетевых устройств, которым были отправлены эхо-запросы?

![image](https://github.com/user-attachments/assets/d9cb9c3f-2108-4040-a26e-500456836422)

**Вопрос для повторения**

В сетях Ethernet данные передаются на устройства по соответствующим МАС-адресам. Для этого коммутаторы и компьютеры динамически создают ARP-кэш и таблицы МАС-адресов. Если компьютеров в сети немного, эта процедура выглядит достаточно простой. Какие сложности могут возникнуть в крупных сетях?

В крупных Ethernet-сетях при динамическом создании ARP-кэша и таблиц MAC-адресов могут возникнуть следующие сложности:

**1.	Перегрузка таблицы MAC-адресов**
Коммутаторы имеют ограниченные размеры CAM-таблиц. В больших сетях таблица может переполниться, что приведет к флуду (рассылке пакетов на все порты) и снижению производительности.

**2.	Проблемы с ARP**
ARP-запросы, которые рассылаются по всей сети, могут вызвать рост широковещательного трафика, перегружая устройства и снижая пропускную способность.

**3.	Широковещательный трафик**
Увеличение ARP-запросов в больших сетях может привести к широковещательным штормам, что снижает общую производительность сети.

**4.	Задержки обновления таблиц** 
Частые обновления таблиц MAC-адресов и ARP-кэша могут вызывать задержки, особенно при изменении активности устройств.

**5.	Рост нагрузки на процессор**
Обработка широковещательных сообщений увеличивает нагрузку на устройства, особенно если в сети много устройств.

**6.	Угрозы безопасности (ARP-спуфинг)**
ARP-спуфинг может использоваться злоумышленниками для атаки типа "Человек посередине", что угрожает безопасности данных.

**Решения:**
- Разделение сети на VLAN для уменьшения широковещательного трафика.
- Включение Spanning Tree Protocol (STP) для предотвращения петель.
- Использование port security для защиты от MAC-флудинга.
- Применение статических ARP-записей для критически важных устройств.
Таким образом, сложности в крупных сетях связаны с перегрузкой таблиц, широковещательным трафиком, задержками и угрозами безопасности, но их можно смягчить с помощью правильных технологий.
















 	
       
   
